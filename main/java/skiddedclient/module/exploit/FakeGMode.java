package skiddedclient.module.exploit;

import net.minecraft.client.MinecraftClient;
import net.minecraft.client.network.PlayerListEntry;
import net.minecraft.entity.player.PlayerEntity;
import net.minecraft.world.GameMode;
import skiddedclient.module.Mod;
import skiddedclient.module.settings.ModeSetting;

public class FakeGMode extends Mod {
	
	GameMode old;
    public static GameMode getGameMode(PlayerEntity player) {
        PlayerListEntry playerListEntry = mc.getNetworkHandler().getPlayerListEntry(player.getUuid()); 
        if (playerListEntry != null) return playerListEntry.getGameMode(); 
        return GameMode.DEFAULT;
    }
	public static MinecraftClient mc = MinecraftClient.getInstance();

	public ModeSetting mode = new ModeSetting("Mode", "Survival", "Survival", "Creative", "Spectator");
	
    public FakeGMode() {
        super("FakeGMode", "This is an Example module!", Category.EXPLOIT);
        addSettings(mode);
    }

	@Override
	public void onTick() {

		super.onTick();
	}
	
	@Override
	public void onEnable() {
		old = getGameMode(mc.player);
		
		if (mode.is("Survival")) {
			mc.interactionManager.setGameMode(GameMode.SURVIVAL);
		} else if (mode.is("Creative")) {
			mc.interactionManager.setGameMode(GameMode.CREATIVE);
		} else if (mode.is("Spectator")) {
			mc.interactionManager.setGameMode(GameMode.SPECTATOR);
		}
		
		super.onEnable();
	}
	
	@Override
	public void onDisable() {
		mc.interactionManager.setGameMode(old);
		super.onDisable();
	}
}